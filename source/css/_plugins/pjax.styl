// PJAX - Seamless page transitions

// Custom easing for smooth, natural animations
$pjax-easing = cubic-bezier(0.4, 0, 0.2, 1)
$pjax-easing-out = cubic-bezier(0.16, 1, 0.3, 1)  // Expo out - more elegant deceleration
$pjax-duration = 0.4s
$pjax-translate-distance = convert(hexo-config('plugins.pjax.translate-distance'))

.page-loading-bar
  position: fixed
  top: 0
  left: calc(50% - 16px)
  width: 32px
  height: 32px
  display: none
  flex-direction: column
  align-items: center
  img
    height: 100%
body.pjax-loading 
  .page-loading-bar
    display: flex

// Main content transition base
.l_body .l_main, #l_cover
  transition: opacity $pjax-duration $pjax-easing, transform $pjax-duration $pjax-easing

// Fade-in animation keyframes
@keyframes pjax-fade-in
  0%
    opacity: 0
    transform: translateY($pjax-translate-distance)
  100%
    opacity: 1
    transform: translateY(0)

// Loading state - content fades out and moves down slightly
body.pjax-loading
  .l_body .l_main, #l_cover
    opacity: 0.4
    transform: translateY($pjax-translate-distance)
    pointer-events: none

// Loaded state - content fades in with upward motion
body.pjax-loaded
  .l_body .l_main, #l_cover
    animation: pjax-fade-in $pjax-duration $pjax-easing-out forwards

// Respect reduced motion preferences
@media (prefers-reduced-motion: reduce)
  .l_body .l_main, #l_cover
    transition: opacity $pjax-duration ease
  body.pjax-loading .l_body .l_main, body.pjax-loading #l_cover
    transform: none
  body.pjax-loaded .l_body .l_main, body.pjax-loaded #l_cover
    animation: pjax-fade-simple $pjax-duration ease forwards
  @keyframes pjax-fade-simple
    0%
      opacity: 0
    100%
      opacity: 1
